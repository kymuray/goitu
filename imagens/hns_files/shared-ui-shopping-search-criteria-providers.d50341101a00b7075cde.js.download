/*@license For license information please refer to shared-ui-shopping-search-criteria-providers.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7800],{84459:function(e,t,r){r.d(t,{EY:function(){return Me},Lv:function(){return _},Ok:function(){return Oe},fF:function(){return K},ld:function(){return Te},m6:function(){return Se},xd:function(){return Re}});var n=r(56195),a=r(26690),l=r(46286),o=r(7138),i=r(51213),s=r(99016),u=r(64341),c=n.createContext(null),d=n.createContext(null),_=(e=>(e[e.READ_PARAMS_FROM_URL=0]="READ_PARAMS_FROM_URL",e[e.MULTI_SELECT_CLEAR_ALL=1]="MULTI_SELECT_CLEAR_ALL",e[e.MULTI_SELECT_CLOSE=2]="MULTI_SELECT_CLOSE",e[e.SORT_AND_FILTER_UPDATE=3]="SORT_AND_FILTER_UPDATE",e[e.SORT_AND_FILTER_SUBMIT=4]="SORT_AND_FILTER_SUBMIT",e[e.SEARCH_FORM_UPDATE=5]="SEARCH_FORM_UPDATE",e[e.REMOVE_FILTER_PILL=6]="REMOVE_FILTER_PILL",e[e.REMOVE_ALL_FILTERS=7]="REMOVE_ALL_FILTERS",e[e.ONE_KEY_SWITCH_TOGGLE=8]="ONE_KEY_SWITCH_TOGGLE",e[e.MULTI_FILTER_UPDATE=9]="MULTI_FILTER_UPDATE",e))(_||{}),p=[{locale:"en_AU",format:"dd-MM-YYYY"},{locale:"en_CA",format:"dd-MM-YYYY"},{locale:"en_GB",format:"dd-MM-YYYY"},{locale:"en_IE",format:"dd-MM-YYYY"},{locale:"en_MY",format:"dd-MM-YYYY"},{locale:"en_SG",format:"dd-MM-YYYY"},{locale:"en_US",format:"MM-dd-YYYY",siteid:1},{locale:"en_US",format:"dd-MM-YYYY",siteid:12},{locale:"en_US",format:"YYYY-MM-dd",siteid:16},{locale:"en_US",format:"YYYY-MM-dd",siteid:28},{locale:"en_US",format:"YYYY-MM-dd",siteid:62},{locale:"en_US",format:"dd-MM-YYYY",siteid:69},{locale:"en_US",format:"dd-MM-YYYY",siteid:76},{locale:"en_US",format:"dd-MM-YYYY",siteid:77},{locale:"es_AR",format:"dd-MM-YYYY"},{locale:"es_ES",format:"dd-MM-YYYY"},{locale:"es_MX",format:"MM-dd-YYYY",siteid:1},{locale:"es_MX",format:"dd-MM-YYYY",siteid:12},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4403},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4404},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4405},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4407},{locale:"da_DK",format:"dd-MM-YYYY"},{locale:"de_AT",format:"dd-MM-YYYY"},{locale:"de_DE",format:"dd-MM-YYYY"},{locale:"de_CH",format:"dd-MM-YYYY"},{locale:"fi_FI",format:"dd-MM-YYYY"},{locale:"fr_CH",format:"dd-MM-YYYY"},{locale:"fr_BE",format:"dd-MM-YYYY"},{locale:"fr_CA",format:"dd-MM-YYYY"},{locale:"fr_FR",format:"dd-MM-YYYY"},{locale:"nl_BE",format:"dd-MM-YYYY"},{locale:"nl_NL",format:"dd-MM-YYYY"},{locale:"nb_NO",format:"dd-MM-YYYY"},{locale:"pt_BR",format:"dd-MM-YYYY"},{locale:"zh_HK",format:"dd-MM-YYYY"},{locale:"vi_VN",format:"dd-MM-YYYY"},{locale:"it_IT",format:"dd-MM-YYYY"},{locale:"ms_MY",format:"dd-MM-YYYY"},{locale:"id_ID",format:"dd-MM-YYYY"},{locale:"th_TH",format:"dd-MM-YYYY"},{locale:"ca_ES",format:"dd-MM-YYYY"},{locale:"en_PH",format:"MM-dd-YYYY"},{locale:"en_HK",format:"YYYY-MM-dd"},{locale:"ja_JP",format:"YYYY-MM-dd"},{locale:"ko_KR",format:"YYYY-MM-dd"},{locale:"sv_SE",format:"YYYY-MM-dd"},{locale:"zh_CN",format:"YYYY-MM-dd"},{locale:"zh_TW",format:"YYYY-MM-dd"}],g=(e,t,r)=>{var n,a,l,o;const i=e.replace("TANYT","").split(/[/.-]/).map(e=>parseInt(e,10));let s="MM-dd-YYYY";const u=p.filter(e=>e.locale===t);if(u.length>1){const e=u.filter(e=>e.siteid===r);e.length>0&&(s=null!=(a=null==(n=e[0])?void 0:n.format)?a:s)}else 1===u.length&&(s=null!=(o=null==(l=u[0])?void 0:l.format)?o:s);return((e,t)=>{var r,n,a,l,o,i,s,u,c;const d=new Date;return"dd-MM-YYYY"===t?{day:null!=(r=e[0])?r:d.getDate(),month:null!=(n=e[1])?n:d.getMonth()+1,year:null!=(a=e[2])?a:d.getFullYear()}:"MM-dd-YYYY"===t?{day:null!=(l=e[1])?l:d.getDate(),month:null!=(o=e[0])?o:d.getMonth()+1,year:null!=(i=e[2])?i:d.getFullYear()}:{day:null!=(s=e[2])?s:d.getDate(),month:null!=(u=e[1])?u:d.getMonth()+1,year:null!=(c=e[0])?c:d.getFullYear()}})(i,s)},E=e=>{let t,r,n,a=e;switch(3!==a.length&&5!==a.length||(a=`0${a}`),a.length){case 4:t=parseInt(a.substring(0,2),10),r=parseInt(a.substring(2,4),10);break;case 6:if(t=parseInt(a.substring(0,2),10),r=parseInt(a.substring(2,4),10),n=a.substring(4,6).toUpperCase(),"AM"!==n&&"PM"!==n)throw new Error(`Failed to parse time value: ${e}`);break;default:throw new Error(`Failed to parse time value: ${e}`)}if(Number.isNaN(t)||Number.isNaN(r))throw new Error(`Failed to parse time value: ${e}`);if(12===t&&"AM"===n&&(t=0),12!==t&&"PM"===n&&(t+=12),t<0||t>23||r<0||r>59)throw new Error(`Failed to parse time value: ${e}`);return`${t}:${r}`},I=(e,t,r,n,a,l)=>{const o=((e,t,r)=>{let n;try{n=t.parseLocalDateString(e,r?{raw:r}:{})}catch(a){n=null}if(!n)try{if(n=t.parseLocalDateString(e,{raw:"yyyy-MM-dd"})||t.parseLocalDateString(e,{raw:"MM/dd/yyyy"}),!n)return null}catch(l){return null}return t.formatDate(n,{raw:"yyyy-MM-dd"})||null})(null!=e?e:n,r,e?l:""),i=(e=>{const t=new Date,[r,n,a]=e.split("-").map(e=>Number.parseInt(e,10));return{day:null!=a?a:t.getDate(),month:null!=n?n:t.getMonth()+1,year:null!=r?r:t.getFullYear()}})(null!=o?o:n),s=new Date,[u,c]=((e,t)=>{const r=null!=e?e:t,[n,a]=r.split(":").map(e=>parseInt(e,10));return[void 0===n||Number.isNaN(n)?10:n,void 0===a||Number.isNaN(a)?30:a]})(t,a);return{...i,hour:null!=u?u:s.getHours(),minute:null!=c?c:s.getMinutes(),second:0}},h=(e,t)=>e?t.formatDate(new Date(e.year,e.month-1,e.day),{raw:"yyyy-MM-dd"}):null,Y=e=>e?`${e.hour}:${e.minute}`:null,T=(e,t,r)=>{t?r.set(e,t):r.delete(e)},R="10:30",m={SEARCH_TERM:"locn",REGION:"dpln",EXACT_LOCATION:"exlocn",LATITUDE:"olat",LONGITUDE:"olon"},A={SEARCH_TERM:"loc2",REGION:"drid1",EXACT_LOCATION:"exloc2",LATITUDE:"dlat",LONGITUDE:"dlon"},O={DATE:"date1",TIME:"time1"},M={DATE:"date2",TIME:"time2"},S="useRewards",f=new Set(["orid","oloc","rdus","piid","totalprice","age","rfrr",S]),N=(e,t,r,n,a)=>{const l=!t&&n&&a?{latitude:Number(n),longitude:Number(a)}:void 0;return{searchTerm:e||void 0,regionId:null!=t?t:void 0,coordinates:l,isExactLocationSearch:Boolean(l)||Boolean(r)}},C=e=>{var t;const r=new Date;return r.setDate(r.getDate()+e),null!=(t=r.toISOString().split("T")[0])?t:""},L=(e,t,r)=>{const n=(e=>{const t=e.get(m.SEARCH_TERM),r=e.get(m.REGION),n=e.get(m.EXACT_LOCATION),a=e.get(m.LATITUDE),l=e.get(m.LONGITUDE);return N(t?decodeURIComponent(t):null,r,n,a,l)})(e),a=(e=>{const t=e.get(A.SEARCH_TERM),r=e.get(A.REGION),n=e.get(A.EXACT_LOCATION),a=e.get(A.LATITUDE),l=e.get(A.LONGITUDE),o=N(t?decodeURIComponent(t):null,r,n,a,l);return o.regionId||o.searchTerm||o.coordinates?o:null})(e),l=((e,t,r)=>{const n=e.get(O.DATE),a=e.get(O.TIME),l=a&&!a.includes(":")?E(a):a;return I(n,l,t,C(14),R,r)})(e,t,r),o=((e,t,r)=>{const n=e.get(M.DATE),a=e.get(M.TIME),l=a&&!a.includes(":")?E(a):a;return I(n,l,t,C(15),R,r)})(e,t,r);return{pickUpLocation:n,pickUpDateTime:l,dropOffLocation:a,dropOffDateTime:o}},v=e=>{const t=[],r="aarpcr";return"on"===e.get(r)&&t.push({id:r,value:!0}),t},D=e=>({id:S,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}),y=e=>{if(0===[...e.keys()].length)return[];const t=[],r=(e=>{const t=[...e.keys()].filter(e=>e.startsWith("sel")||f.has(e));return[...new Set(t)]})(e);return r.forEach(r=>{const n=e.getAll(r);n.length>0&&[...new Set(n)].forEach(e=>{"piid"===r?t.push({id:"carOfferToken",value:e}):r===S?t.push(D(e)):t.push({id:r,value:e})})}),t},P=e=>{const t=y(e),r=(e=>{const t=[],r=e.get("cdnu"),n=e.get("vend"),a=e.get("cpcd"),l=e.get("rtcd"),o=e.get("odcd");return r&&t.push({id:"corporateDiscountCode",value:r}),n&&t.push({id:"selVen",value:n}),a&&t.push({id:"promoCode",value:a}),l&&t.push({id:"rateCode",value:l}),o&&t.push({id:"loyaltyProgramCode",value:o}),t})(e),n=(e=>{const t=[],r=e.get("sort");return r&&t.push({id:"sort",value:r}),t})(e);return[...t,...r,...n]},U=(e,t,r)=>({primarySearchCriteria:{car:L(e,t,r)},secondaryCriteria:{booleans:v(e),selections:P(e)}}),F=(e,t,r)=>{var n;return[...((null==(n=r.secondaryCriteria)?void 0:n.selections)||[]).filter(r=>r.id!==e||r.id===e&&r.value!==t)]},b=(e,t)=>{var r,n;return[...(null==(n=null==(r=e.secondaryCriteria)?void 0:r.selections)?void 0:n.filter(e=>e.id!==S))||[],{id:S,value:t?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}]},G=(e,t,r)=>{const{name:n,value:a}=e,{type:l,checked:o}=t.target;switch(l){case"checkbox":{const e=o?((e,t,r)=>{var n;const a=(null==(n=r.secondaryCriteria)?void 0:n.selections)||[];return a.some(r=>r.id===e&&r.value===t)?[...a]:[...a,{id:e,value:t}]})(n,a,r):F(n,a,r);return{...r,secondaryCriteria:{...r.secondaryCriteria,selections:e}}}case"radio":case"select-one":{const e=((e,t,r)=>{var n;const a=((null==(n=r.secondaryCriteria)?void 0:n.selections)||[]).filter(t=>t.id!==e);return t&&a.push({id:e,value:t}),[...a]})(n,a,r);return{...r,secondaryCriteria:{...r.secondaryCriteria,selections:e}}}default:return r}},B=(e,t,r)=>{const n=r.getAll(e);return n.includes(t)&&(r.delete(e),n.forEach(n=>{n!==t&&r.append(e,n)})),r.toString()},w=(e,t,r)=>(t?r.set(e,t):r.delete(e),r.toString()),H=e=>w("pwaDialog",null,new URLSearchParams(e)),x=e=>{const t=new URLSearchParams(e.toString()),r=Array.from(t.entries()).filter(([,e])=>e.includes("["));return 0===r.length?null:(r.forEach(e=>{const[r,n]=e;t.delete(r,n);JSON.parse(n).forEach(e=>{t.append(r,e)})}),t)},$=(e,t,r)=>{const{name:n,value:a}=e,{type:l,checked:o}=t.target;switch(l){case"checkbox":return o?((e,t,r)=>(r.getAll(e).includes(t)||r.append(e,t),r.toString()))(n,a,r):B(n,a,r);case"radio":case"select-one":return w(n,a,r);default:return r.toString()}},k="filterCount",W=e=>{const t=(0,o.zy)(),r=(0,o.Zp)(),a=(0,i.useLocalization)(),[l,s]=(0,n.useState)(1),[u,c]=(0,n.useState)(1),d=n.useMemo(()=>new URLSearchParams(t.search),[t.search]),_=n.useMemo(()=>x(d),[d]);n.useEffect(()=>{if(!_)return;const e=setTimeout(()=>{r({...t,search:_.toString()},{replace:!0})});return()=>{e&&clearTimeout(e)}},[t,r,_]);const p=(0,n.useRef)(null),g=(0,n.useRef)(null),E=U(null!=_?_:d,a,e);return n.useReducer((n,o)=>{var i,_,E,I,R,N,C;const L=!!d.get("pwaDialog"),v=g.current||n,y=p.current||t.search;switch(o.type){case 0:return U(null!=(i=x(o.urlSearchParams))?i:o.urlSearchParams,a,e);case 3:{const{field:e,event:a}=o;if("clear"===e.name||"clear_quick_filters"===e.name)return n;if("restore"===e.name)return g.current=null,p.current=null,setTimeout(()=>{r({...t,search:H(t.search)})},0),n;if(L)return p.current=$(e,a,new URLSearchParams(y)),g.current=G(e,a,v),n;const l=$(e,a,d);r({...t,search:l});const i=u+1;c(i);const s={id:k,value:i.toString()},h=G(e,a,n),Y=[...null!=(I=null==(E=null==(_=h.secondaryCriteria)?void 0:_.selections)?void 0:E.filter(e=>e.id!==k))?I:[],s];return{...h,secondaryCriteria:{...h.secondaryCriteria,selections:Y}}}case 5:{const{updatedPrimarySearchCriteria:e}=o,n=new URLSearchParams,i=d.get(S);w(S,i,n);const u=((e,t,r)=>{var n,a,l,o,i,s,u,c,d,_;r.delete("pwaDialog");const p=null==e?void 0:e.pickUpLocation;T(m.SEARCH_TERM,null==p?void 0:p.searchTerm,r),T(m.EXACT_LOCATION,null==(n=null==p?void 0:p.isExactLocationSearch)?void 0:n.toString(),r),T(m.REGION,null==p?void 0:p.regionId,r),T(m.LATITUDE,null==(l=null==(a=null==p?void 0:p.coordinates)?void 0:a.latitude)?void 0:l.toString(),r),T(m.LONGITUDE,null==(i=null==(o=null==p?void 0:p.coordinates)?void 0:o.longitude)?void 0:i.toString(),r);const g=null==e?void 0:e.pickUpDateTime;T(O.DATE,h(g,t),r),T(O.TIME,Y(g),r);const E=null==e?void 0:e.dropOffLocation;T(A.SEARCH_TERM,null==E?void 0:E.searchTerm,r),T(A.EXACT_LOCATION,null==(s=null==E?void 0:E.isExactLocationSearch)?void 0:s.toString(),r),T(A.REGION,null==E?void 0:E.regionId,r),T(A.LATITUDE,null==(c=null==(u=null==E?void 0:E.coordinates)?void 0:u.latitude)?void 0:c.toString(),r),T(A.LONGITUDE,null==(_=null==(d=null==E?void 0:E.coordinates)?void 0:d.longitude)?void 0:_.toString(),r);const I=null==e?void 0:e.dropOffDateTime;return T(M.DATE,h(I,t),r),T(M.TIME,Y(I),r),r.toString()})(e.car,a,n);r({...t,search:u});const c=l+1;s(c);const _=[{id:"searchFormCount",value:c.toString()}];return i&&_.push(D(i)),{primarySearchCriteria:e,secondaryCriteria:{booleans:[],selections:_}}}case 6:{const[e={id:"",value:""}]=o.filterId,{id:a,value:l}=e,i=B(a,l,d);r({...t,search:i});const s=u-1;c(s);const _={id:k,value:s.toString()},p=[...F(a,l,n).filter(e=>e.id!==k),_];return{...n,secondaryCriteria:{...n.secondaryCriteria,selections:p}}}case 7:{const e=(e=>{var t;const r=(null==(t=e.secondaryCriteria)?void 0:t.selections)||[];return 0===r.length?[]:r.filter(e=>e.id.startsWith("sel")||f.has(e.id))})(n),a=e.reduce((e,t)=>{const{id:r,value:n}=t;return B(r,n,new URLSearchParams(e))},y),l=e.reduce((e,t)=>{const{id:r,value:n}=t,a=F(r,n,e);return{...e,secondaryCriteria:{...e.secondaryCriteria,selections:a}}},v);return L?(p.current=a,g.current=l,n):(r({...t,search:a}),l)}case 4:{const e=y,n=v,a=u+1;c(a);const l={id:k,value:a.toString()},o=[...null!=(C=null==(N=null==(R=n.secondaryCriteria)?void 0:R.selections)?void 0:N.filter(e=>e.id!==k))?C:[],l];return g.current=null,g.current=null,setTimeout(()=>{r({...t,search:H(e)})},0),{...n,secondaryCriteria:{...n.secondaryCriteria,selections:o}}}case 8:return{...n,secondaryCriteria:{...n.secondaryCriteria,selections:b(n,o.isChecked)}};case 9:{const{keyValueParams:e}=o,a=((e,t)=>(e.forEach(e=>{T(e.key,e.value,t)}),t.toString()))(e,d);return r({...t,search:a}),((e,t)=>{var r;const n=(null==(r=t.secondaryCriteria)?void 0:r.selections)?[...t.secondaryCriteria.selections]:[],a=e.map(e=>e.key),l=n.filter(e=>!a.includes(e.id));return e.forEach(e=>{l.push({id:e.key,value:e.value})}),{...t,secondaryCriteria:{...t.secondaryCriteria,selections:l}}})(e,n)}default:return n}},E)},V=(e=>(e.LOWER="LOWER",e.UPPER="UPPER",e))(V||{}),j=(e=>(e.DAY="DAY",e.MONTH="MONTH",e.WEEK="WEEK",e.WEEKEND="WEEKEND",e))(j||{}),q="10:30",K=(e=>(e.FILTER_CATEGORIES="filterCategories",e))(K||{});function X(e){if(!e)return null;const[t,r]=e.split(",");return t&&r?{latitude:Number(t),longitude:Number(r)}:null}var z=()=>{var e;const t=new Date;return t.setDate(t.getDate()+14),null!=(e=t.toISOString().split("T")[0])?e:""};function Q(e){const{hotelId:t,hotelName:r,hotelLatLong:n}=e;return{id:t,name:r,coordinates:X(n),type:"PROPERTY"}}function J(e){const{airportCode:t,location:r,airportLatLong:n,regionId:a}=e;return t?{id:t,name:r,coordinates:X(n),type:"AIRPORT"}:{id:a,name:r,type:"DESTINATION"}}function Z(e,t,r){const n=Object.fromEntries(e),{direction:a,roundTrip:l,pickUpDate:o,pickUpTime:i,dropOffDate:s,dropOffTime:u}=n,c=function(e,t){if("true"===e)return"ROUNDTRIP";switch(t){case"H2A":case"TO_AIRPORT":return"TO_AIRPORT";default:return"FROM_AIRPORT"}}(l,a),d="TO_AIRPORT"===c,_=[],p=function(e){const{adults:t,children:r,infants:n}=e,a=[];return t&&a.push({type:"ADULT",count:parseInt(t,10)}),r&&a.push({type:"CHILD",count:parseInt(r,10)}),n&&a.push({type:"INFANT",count:parseInt(n,10)}),a}(n),g={dateTime:I(o,i,t,z(),q,r),origin:d?Q(n):J(n),destination:d?J(n):Q(n)};if(_.push(g),"true"===n.roundTrip){const e={dateTime:I(null!=s?s:o,null!=u?u:i,t,z(),q,r),origin:Q(n),destination:J(n)};_.push(e)}return{journeyCriteria:_,shoppingPath:"STANDALONE",travelerDetails:p,dateRange:{},direction:null!=c?c:"FROM_AIRPORT",locations:[]}}var ee=e=>{var t;if(0===[...e.keys()].length)return null;const r=[],n=((e,t)=>{const r=[...t.keys()].filter(t=>t.indexOf(e)>-1);return[...new Set(r)]})("filter",e);return r.push({id:"sort",value:null!=(t=e.get("sort"))?t:""}),n.forEach(t=>{const n=[...new Set(e.getAll(t))];n.length&&n.forEach(e=>{e&&r.push({id:t,value:e})})}),r},te=e=>({booleans:[{id:"swp",value:"false"!==e.get("swp")}],selections:ee(e)}),re=({children:e,localDateFormat:t})=>{const r=(0,i.useLocalization)(),[a]=(0,s.ok)(),l=n.useMemo(()=>({primarySearchCriteria:{groundTransportation:Z(a,r,t)},secondaryCriteria:te(a)}),[a,r,t]);return n.createElement(c.Provider,{value:l},e)};re.displayName="sharedui-GroundTransportationCriteriaProvider";var ne=(e=>(e.DESTINATION="destination",e.REGION_ID="regionId",e.LAT_LONG="latLong",e.DATE_ONE="d1",e.DATE_TWO="d2",e.START_DATE="startDate",e.END_DATE="endDate",e.ADULTS="adults",e.CHILDREN="children",e.SELECTED="selected",e.FLEXIBILITY="flexibility",e.SEARCH_RANGE="searchRange",e.FLEXIBLE_SEARCH_REQUIREMENT="flexibleSearchRequirement",e.MAP_BOUNDS="mapBounds",e.GROUP="group",e))(ne||{}),ae=(e=>(e.SORT="sort",e.HOTEL_NAME="hotelName",e.REWARDS="rewards",e.STAR="star",e.GUEST_RATING="guestRating",e.CLEANING_AND_SAFETY="cleaningAndSafetyPractices",e.LODGING="lodging",e.MEAL_PLAN="mealPlan",e.AMENITIES="amenities",e.TRAVELER_TYPE="travelerType",e.PAYMENT_TYPE="paymentType",e.DEALS="deals",e.PROPERTY_STYLE="propertyStyle",e.BEDROOM_FILTER="bedroomFilter",e.NEIGHBORHOOD="neighborhood",e.STAY_TYPE="stayType",e.ACCESSIBILITY="accessibility",e.POI="poi",e.MIN_BEDROOMS="bedroom_count_gt",e.MIN_BATHROOMS="us_bathroom_count_gt",e.MIN_BEDS="bed_count_ge",e.MIN_KING_BED="king_bed_gt",e.MIN_QUEEN_BED="queen_bed_gt",e.MIN_FULL_BED="full_bed_gt",e.MIN_TWIN_BED="twin_bed_gt",e.MIN_BUNK_BED="bunk_bed_gt",e.PROPERTY_TYPE="property_type_group",e.LOCATION="location_group",e.ACCESSIBILITY_FEATURES="accessibility_features_group",e.BOOKING_OPTIONS="booking_options_group",e.DISCOUNTS_GROUP="discounts_group",e.AMENITIES_FACILITIES="amenities_facilities_group",e.FREE_CANCELLATION_GROUP="free_cancellation_group",e.HOUSE_RULES="house_rules_group",e.NEARBY_ACTIVITIES="nearby_activities_group",e.NEIGHBORHOOD_GROUP="neighborhood_group",e.PREMIER_HOST="premier_host_group",e.PROPERTIES_GOOD="properties_good_for_group",e.PROPERTY_REVIEWS="property_reviews_group",e.ROOMS_SPACES="rooms_spaces_group",e.COMMON_SPACES_GROUP="common_spaces_group",e.SAFETY="safety_group",e.VIRTUAL_TOUR_GROUP="virtual_tour_group",e.PRICING_GROUP="pricing_group",e.PROPERTY_NAME="propertyName",e.AVAILABLE_FILTER="availableFilter",e.AGENCY_BUSINESS_MODELS="agencyBusinessModels",e.COMMISSION_TIERS="commissionTiers",e.USE_REWARDS="useRewards",e.BED_TYPE_GROUP="bed_type_group",e.STAY_OPTIONS_GROUP="stay_options_group",e.HOTEL_BRAND="hotel_brand",e.MULTI_NEIGHBORHOOD_GROUP="multi_neighborhood_group",e.SPECIAL_DISCOUNTS_GROUP="special_discounts_group",e.HIGHLY_RATED_FOR_GROUP="highly_rated_for_group",e.AI_SEARCH_QUERY="ai_search_query",e.AVAILABILITY_GROUP="availableFilter",e.EXPEDIA_REWARDS_GROUP="expedia_rewards_group",e.AVAILABILITY_GROUP_VRBO="availability_group",e.LOCATION_HIGHLIGHTS_GROUP="location_highlights_explore",e.PROPERTY_AMENITIES_GROUP="property_amenities_group_explore",e.SPECIALIZED_STAYS_GROUP="specialized_stays_group_explore",e.ROOM_AMENITIES_GROUP="room_amenities_group_explore",e.RECREATION_GROUP="recreation_group_explore",e.NEARBY_GROUP="nearby_group",e.AI_LOCATION="AI_LOCATION",e.AI_AMENITY="AI_AMENITY",e.AI_AFFINITY="AI_AFFINITY",e.AI_AFFINITY_NEARBY="AI_AFFINITY_NEARBY",e.AI_PROPERTY_BRAND="AI_PROPERTY_BRAND",e.AI_PROPERTY_NAME="AI_PROPERTY_NAME",e.AI_SEARCH_INPUT="ai_search_input",e.AI_SELECTED="ai_selected",e.AI_UNIDENTIFIED="AI_UNIDENTIFIED",e.ROOM_VIEWS_GROUP="room_views_group",e))(ae||{}),le=(e=>(e.VACATION_RENTALS_ONLY="vacationRentalsOnly",e.PACKAGE_RATES="packageRates",e.DATE_SELECTED_BY_USER="dateSelectedByUser",e.SHOW_FILTER_NOTIFICATION="showFilterNotification",e))(le||{}),oe=(e=>(e.PRICE="price",e.NIGHTLY_PRICE="nightly_price",e.TOTAL_PRICE="total_price",e.PROPERTY_SIZE="property_size",e.AI_PRICE="ai_price",e))(oe||{}),ie=({destination:e,regionId:t,latLong:r,selected:n,mapBounds:a,group:l})=>{const[o,i]=(null==r?void 0:r.split(",").map(e=>parseFloat(e)))||[null,null];return{regionName:e,regionId:t,coordinates:o&&i?{latitude:o,longitude:i}:null,mapBounds:a,...n&&{pinnedPropertyId:n},...l&&{propertyIds:l}}},se=e=>{const t=new Date(e),[r,n,a]=e.split("-").map(e=>parseInt(e,10));return{year:null!=r?r:t.getFullYear(),month:null!=n?n:t.getMonth()+1,day:null!=a?a:t.getDate()}},ue=e=>{const[t,r,n]=e.split("/");return`${n}-${t}-${r}`},ce=({startDate:e,endDate:t})=>{if(!e||!t)return null;const r=/^\d{4}-\d{2}-\d{2}$/,n=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}$/,a=r.test(e)||n.test(e),l=r.test(t)||n.test(t);if(!a||!l)return null;const o=r.test(e)?e:ue(e),i=r.test(t)?t:ue(t);return{checkInDate:se(o),checkOutDate:se(i)}},de=({queryParams:e})=>{const t=[];return Object.values(oe).forEach(r=>{const n=e.getAll(r),a=(1===n.length&&null!==n[0]&&void 0!==n[0]?n[0].split(","):n).filter(e=>0!==e.length).map(Number).filter(e=>!Number.isNaN(e)),l=a.includes(-2),o=a.includes(-3);a.length>1&&t.push({id:r,min:o?-3:l?Math.min(...a.filter(e=>e>0)):Math.min(...a),max:l?-2:Math.max(...a)})}),t},_e=({adults:e,children:t})=>{const r=(null==e?void 0:e.split(",").map(e=>parseInt(e,10)))||[],n=(null==t?void 0:t.split(","))||[];return r.map((e,t)=>{const r=t+1;return{adults:e,children:n.filter(e=>e.startsWith(r.toString())).map(e=>{var t;return{age:parseInt(null!=(t=e.split("_")[1])?t:"",10)}})}}).filter(e=>!Number.isNaN(e.adults))},pe=({queryParams:e,paramsToExclude:t,fetchedFilterKeys:r})=>{const n=Object.values(ae),a=r?Object.keys(r):[];return((e,t)=>e.some(e=>e.id===t.id)?e:[...e,t])(Array.from(new Set([...n,...a])).reduce((r,n)=>{const a=t.includes(n),l=e.getAll(n);if(l.length&&""!==l[0]){const e=l.map(e=>(a?[e]:e.split(",")).map(e=>"useRewards"===n?{id:n,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}:{id:n,value:e}));return[...r,...e]}return[...r]},[]).flat(),{id:"sort",value:"RECOMMENDED"})},ge=e=>{const t=(e=>{const t=e.getAll("flexibility");return 0===t.length?null:t.reduce((e,t)=>{var r;const n=t.split("_");if(n.length>1){const t=parseInt(null!=(r=n[0])?r:"",10),a=n[1]?j[n[1].toUpperCase()]:"DAY",l=3===n.length&&n[2]?{bound:V[n[2].toUpperCase()]}:{};t&&a&&e.push({length:t,unit:a,...l})}return e},[])})(e),r=(e=>e.getAll("searchRange").reduce((e,t)=>{var r,n;const a=t.split("_");return 2===a.length&&e.push({start:se(null!=(r=a[0])?r:""),end:se(null!=(n=a[1])?n:"")}),e},[]))(e),n=(e=>e.getAll("flexibleSearchRequirement").filter(e=>e))(e),a={...(null==t?void 0:t.length)&&{flexibility:t},...(null==r?void 0:r.length)&&{searchRange:r},...(null==n?void 0:n.length)&&{flexibleSearchRequirement:n}};return Object.getOwnPropertyNames(a).length?a:null},Ee=e=>{const t=e.map(e=>e.split(",")).filter(([e,t])=>""!==e&&""!==t).map(([e,t])=>({latitude:Number(e),longitude:Number(t)}));return 2===t.length?t:null},Ie=e=>{var t;const r=null==(t=null==e?void 0:e.split(","))?void 0:t.filter(e=>""!==e);return(null==r?void 0:r.length)?r:null},he=[{URL_PARAM_ID:"packageRates",QUERY_BOOLEAN_ID:"showPackageRates"},{URL_PARAM_ID:"vacationRentalsOnly",QUERY_BOOLEAN_ID:"showVacationRentalsOnly"},{URL_PARAM_ID:"dateSelectedByUser",QUERY_BOOLEAN_ID:"isUserSelectedDates"},{URL_PARAM_ID:"showFilterNotification",QUERY_BOOLEAN_ID:"showFilterNotification"}],Ye=e=>he.flatMap(t=>"true"===e.get(t.URL_PARAM_ID)?[{id:t.QUERY_BOOLEAN_ID,value:!0}]:[]),Te=(e,t)=>{var r;const n=ie({destination:e.get("destination"),regionId:"null"===e.get("regionId")?null:e.get("regionId"),latLong:e.get("latLong"),selected:e.get("selected"),mapBounds:Ee(e.getAll("mapBounds")),group:Ie(e.get("group"))}),a=ce({startDate:e.get("startDate"),endDate:e.get("endDate")}),l=_e({adults:e.get("adults"),children:e.get("children")}),o=de({queryParams:e}),i=pe({queryParams:e,paramsToExclude:["hotelName","poi","ai_search_query","ai_search_input"],fetchedFilterKeys:t}),s=ge(e),u=s?{flexSearchCriteria:s}:{},c=Ye(e);return{propertySearchCriteriaInput:{primary:{destination:n,rooms:l,dateRange:(null==s?void 0:s.searchRange)&&0!==(null==(r=null==s?void 0:s.searchRange)?void 0:r.length)?null:a,...u},secondary:{ranges:o,selections:i,booleans:c}}}},Re=e=>{var t;const r=ie({destination:e.get("destination"),regionId:"null"===e.get("regionId")?null:e.get("regionId"),latLong:e.get("latLong"),selected:e.get("selected"),mapBounds:Ee(e.getAll("mapBounds")),group:Ie(e.get("group"))}),n=ce({startDate:e.get("startDate"),endDate:e.get("endDate")}),a=_e({adults:e.get("adults"),children:e.get("children")}),l=de({queryParams:e}),o=pe({queryParams:e,paramsToExclude:["hotelName","poi","ai_search_query","ai_search_input"]}),i=ge(e),s=i?{flexSearchCriteria:i}:{},u=Ye(e);return{primarySearchCriteria:{property:{destination:r,rooms:a,dateRange:(null==i?void 0:i.searchRange)&&0!==(null==(t=null==i?void 0:i.searchRange)?void 0:t.length)?null:n,...s}},secondaryCriteria:{ranges:l,selections:o,booleans:u}}},me=[...Object.values(ne),...Object.values(le),...Object.values(ae),...Object.values(oe)],Ae=(a.gql`
  query PropertySearchQuery(
    $context: ContextInput!
    $shoppingContext: ShoppingContextInput
    $criteria: PropertySearchCriteriaInput
    $productShoppingCriteriaInput: ProductShoppingCriteriaInput
  ) {
    propertySearch(
      context: $context
      shoppingContext: $shoppingContext
      criteria: $criteria
      productShoppingCriteriaInput: $productShoppingCriteriaInput
    ) {
      searchCriteria {
        searchId
      }
    }
  }
`,{[l.ch.GroundTransportation]:{Search:re,Product:n.Fragment},[l.ch.Cars]:{Search:({children:e,localDateFormat:t})=>{const[r,a]=W(t);return n.createElement(c.Provider,{value:r},n.createElement(d.Provider,{value:a},e))},Product:n.Fragment},[l.ch.Lodging]:{Search:({children:e})=>{const[t]=(0,s.ok)(),r=n.useMemo(()=>me.flatMap(e=>{const r=t.getAll(e).sort();return r.length?r.map(t=>`${e}=${t}`):[`${e}=`]}).join("&"),[t]),a=n.useMemo(()=>Re(t),[r]);return n.createElement(c.Provider,{value:a},e)},Product:n.Fragment}}),Oe=({children:e,localDateFormat:t,criteriaType:r="Search"})=>{const a=(0,l.z)(),o=a?Ae[a][r]:n.Fragment;return n.createElement(o,{localDateFormat:t},e)};Oe.displayName="sharedui-ProductShoppingCriteriaProvider";var Me=()=>n.useContext(c),Se=()=>{const e=n.useContext(d);return e||(()=>{console.error("useProductShoppingCriteriaDispatch must be used within a ProductShoppingCriteriaDispatchProvider")})},fe=e=>{switch(e){case"oneway":default:return"ONE_WAY";case"roundtrip":return"ROUND_TRIP";case"multi":return"MULTI_DESTINATION"}},Ne=(e,t,r)=>e.filter(e=>null!==e).map(e=>{var n,a;const l=decodeURIComponent(e).replace("from:","").replace(",to:","|").replace(",departure:","|").split("|"),o=l[2]||"";return{departureDate:g(o,t,r),destination:(null==(n=l[1])?void 0:n.split(",toCode")[0])||"",origin:(null==(a=l[0])?void 0:a.split(",frCode")[0])||""}}),Ce=e=>{const t=e.split(","),r=[],n=t.find(e=>e.includes("adults"))||"",a=t.find(e=>e.includes("children"))||"",l=t.find(e=>e.includes("infantinlap"))||"N";return n&&r.push((e=>{const t=e.split(":");return{travelerType:"ADULT",count:t[1]?parseInt(t[1],10):1}})(n)),a&&r.push(...((e,t)=>{var r;const n=[],a=e.split(":");if("0"===(null==a?void 0:a[1]))return[];const l=a[1]?a[1].split("["):"";let o=parseInt(null!=(r=l[0])?r:"",10);const i=l[1]&&l[1].replace("]","").split(";").map(e=>parseInt(e,10))||[],s=i.filter(e=>e<=1);return s.length>0&&(o-=s.length,n.push({count:s.length,travelerType:(null==t?void 0:t.includes("Y"))?"INFANT_IN_LAP":"INFANT_IN_SEAT",ages:s})),o>0&&n.push({count:o,travelerType:"CHILD",ages:i.filter(e=>e>1)}),n})(a,l)),r},Le=e=>e.includes("business")?"BUSINESS":e.includes("premium")||e.includes("premium coach")||e.includes("premium_economy")?"PREMIUM_ECONOMY":e.includes("first")?"FIRST":e.includes("any")?"ANY":"COACH",ve=(a.gql`
  query FlightSearchQuery(
    $context: ContextInput!
    $flightsSearchContext: FlightsSearchContextInput
    $journeyCriteria: [FlightsJourneyCriteriaInput!]!
    $searchFilterValuesList: [FlightsSearchFilterValuesInput!]
    $searchPreferences: FlightsSearchPreferencesInput
    $sortOption: FlightsSortOptionTypeInput
    $travelerDetails: [FlightsTravelerDetailsInput!]
  ) {
    flightsSearch(
      context: $context
      flightsSearchContext: $flightsSearchContext
      journeyCriteria: $journeyCriteria
      searchPreferences: $searchPreferences
      searchFilterValuesList: $searchFilterValuesList
      travelerDetails: $travelerDetails
      sortOption: $sortOption
    ) {
      gaiaId
    }
  }
`,(0,n.createContext)(null));(({children:e})=>{const t=(0,o.zy)(),{context:r}=(0,u.R)(),a=(0,n.useMemo)(()=>((e,t,r)=>{const n=e.get("trip"),a=e.get("originalBookingId"),l=e.get("journeysContinuationId"),o=e.get("airCreditIntent"),i=e.get("passengers")||"",s=e.get("options")||"",u=[e.get("leg1")||"",e.get("leg2")||"",e.get("leg3")||"",e.get("leg4")||"",e.get("leg5")||""].filter(e=>""!==e);return{journeyCriteria:Ne(u,t,r),searchPreferences:{cabinClass:Le(s)},flightsSearchContext:{tripType:fe(n),originalBookingId:a,journeysContinuationId:l,hasCreditRedemptionIntent:"true"===o||null},travelerDetails:Ce(i),sortOption:null,searchFilterValuesList:[]}})(new URLSearchParams(t.search),r.locale,r.siteId),[r.locale,r.siteId,t.search]);return n.createElement(ve.Provider,{value:a},e)}).displayName="sharedui-FlightsSearchCriteriaProvider"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-shopping-search-criteria-providers.d50341101a00b7075cde.js.map